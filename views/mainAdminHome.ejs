<html ng-app="mainAdminapp">
<head><script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
<link rel='stylesheet' href='/stylesheets/style.css' />
<style>


</style>

</head>
<body ng-controller="mainadminCtrl">


<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Bee Cafeteria</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="#" ng-click="loadadminhome()">Home</a></li>
        <li><a href="#" ng-click="registercounter()">Add Counter</a></li>
              </ul>
            <ul class="nav navbar-nav navbar-right">
        <li><a href="#">Log Out</a></li>
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


<div style="display:inline" class="container">
<div class="container" class="wraper " style="display:inline">
<div class="col-sm-12">
<div class="row">
<div class="col-sm-6 form-group">    
                <table  class="table table-striped " style="display:inline">
                    <thead>
                        <tr>
                            <th>Counter No.</th>
                            <th>Admin Name</th>
                            <th>Phone No.</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    
                        <tr ng-repeat="tableData in tabelsData">
                    
                            <td>
                                <div ng-hide="editingData[tableData.counter_id]"><input type="text" ng-model="tableData.counter_id" /></div>
                                <div ng-show="editingData[tableData.counter_id]"><input type="text" ng-model="tableData.counter_id" /></div>
                            </td>
                            <td>
                                <div >{{tableData.name | uppercase}}</div>

                            </td>
                            <td>
                                <div>{{tableData.phone}}</div>

                            </td>
                            
                            <td>
                               <button ng-hide="editingData[tableData.counter_id]" ng-click="modify(tableData)">Modify</button>
                                <button ng-show="editingData[tableData.counter_id]" ng-click="update(tableData)">Update</button>  
                          <button  ng-click="confirm(tableData)">Confirm</button>
                                
                                <button ng-click="deny(tableData)">Deny</button>
                            </td>
                        </tr>
                       
                       
                    </tbody>
                </table>
    </div></div>
<br><br><br> <div class="row">
<div class="col-sm-6 form-group">   
                <table class="table table-striped" style="display:inline;">
                    <thead>
                        <tr>
                            <th>Counter No.</th>
                            <th>Counter Name</th>
                            <th>Desciption</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    
                        <tr ng-repeat="countersData in counterData">
                      
                            <td>
                                <div >{{countersData.primary_id | uppercase}}</div>
                                
                            </td>
                            <td>
                                <div ng-hide="editingData[countersData.primary_id]">{{countersData.name | uppercase}}</div>
                                <div ng-show="editingData[countersData.primary_id]"><input type="text" ng-model="countersData.name" /></div>
                            </td>
                            <td>
                                <div ng-hide="editingData[countersData.primary_id]">{{countersData.description}}</div>
                                <div ng-show="editingData[countersData.primary_id]"><input type="text" ng-model="countersData.description" /></div>
                            </td>
                            
                            <td>
                                
                          <button ng-hide="editingData[countersData.primary_id]" ng-click="modifyCounter(countersData)">Modify</button>
                                <button ng-show="editingData[countersData.primary_id]" ng-click="updateCounter(countersData)">Update</button>
                                
                                <button ng-click="removecounter(countersData) ng-hide="viewField">Remove</button>
                            </td>
                        </tr>
                       
                       
                    </tbody>
                </table>
    
            </div>



</div>

</div>
<script>
var app = angular.module('mainAdminapp', []);



app.controller('mainadminCtrl', function($scope,$http) {
  $scope.tabelsData=[];
  $scope.counterData=[];
   $scope.loadadminhome= function()
    {
    $http({
    method:'GET',
    url:'/admin/loadadminhome'
    }).success(function(data){
   alert("dat a in anloadvalue"+JSON.parse(data.results));


    $scope.tabelsData=JSON.parse(data.results);
    $scope.counterData =JSON.parse(data.results1);

    alert("counteradata"+JSON.stringify($scope.counterData));
    alert("tabelsData : "+JSON.stringify($scope.tabelsData)); 
    });
    
    };
    $scope.loadadminhome();
  $scope.editingData = {};
    //$scope.extra=true;
    for (var i = 0, length = $scope.tabelsData.length; i < length; i++) {
      $scope.editingData[$scope.tabelsData[i].counter_id] = false;
      $scope.editingData[$scope.countersData[i].primary_id] = false;
    }

$scope.modifyCounter = function(tableData){
        $scope.editingData[tableData.primary_id] = true;
		

    };



    $scope.modify = function(tableData){
        $scope.editingData[tableData.counter_id] = true;
		

    };

      $scope.update = function(tableData){
      alert("tabledata item : "+tableData.item_name);
		$scope.editingData[tableData.counter_id] = false;
		  $http({
		            method: 'POST',
		            url: '/updateCounterData',
		            data:tableData
		            }).success(function(response){
		           		alert(JSON.stringify(response));
		           		//$scope.extra=false;
		           		//$scope.results= response;
		           		
		           		window.location="/loadadminejs";
		        }).error(function(error){
		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
		        });

    };
  

  
  $scope.confirm = function(tableData){
      alert("tabledata item : "+JSON.stringify(tableData));
		//$scope.editingData[tableData.counter_id] = false;
		  $http({
		            method: 'POST',
		            url: '/admin/approveAdmin',
		            data:tableData
		            }).success(function(response){
		           		alert(JSON.stringify(response));
		           		//$scope.extra=false;
		           		//$scope.results= response;
		           		window.location="/admin/loadadminejs";
		        }).error(function(error){
		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
		        });

    };

  $scope.deny = function(tableData){      
	//	$scope.editingData[tableData.counter_id] = false;
		  $http({
		            method: 'POST',
		            url: '/admin/denyAdmin',
		            data:tableData
		            }).success(function(response){
		           		alert(JSON.stringify(response));
		           		//$scope.extra=false;
		           		//$scope.results= response;
		           		window.location="/admin/loadadminejs";
		        }).error(function(error){
		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
		        });

    };
  
  $scope.add_deals = function(){
    window.location='/add_deals';
    };
	
  
    $scope.registercounter = function(){
    window.location='/admin/counterSignUp';
    };
	
	 $scope.logout = function(){
    window.location='/logout';
    };
  
    
});

</script> 
</body>
</html>
